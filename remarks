1) ти іноді повертаєш вхідну строку а іноді нову - не зрозуміло чи повинен клієнт її звільняти 
2) реелокація occ_pos зайва
3) occ_pos як вказівник на буфер що ми алокувалли краще не змінювати. Замість краще створити нову змінну вказівник чи індекс
4) в тебе вже є всі входження  в occ_pos, не потрібно шукати все по другому разу, їх можна вирахувати
5) ctr_find_if можна простіше зробити, іноді краще зробити змінну ніж потім їх виховувати назад
Ну або функцію що копіює n символів можете самі написати
